<!doctype html><html lang=en><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Along with todays analysis of Chipworks A9X die shot, Im also going to use this time to revisit Apples A9 SoC. Based on some new information from Chipworks and some additional internal test data, I am issuing a correction to our original analysis of Apples latest-generation phone SoC."><meta name=robots content="index,follow,noarchive"><link href="https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400&display=swap" rel=stylesheet media=print type=text/css onload='this.media="all"'><title>Correcting Apple's A9 SoC L3 Cache Size: A 4MB Victim Cache</title><link rel=canonical href=./correcting-a9s-l3-cache.html><style>*{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;color:#000;text-decoration-skip:ink}body{font-family:open sans,myriad pro,Myriad,sans-serif;font-size:17px;line-height:160%;color:#1d1313;max-width:700px;margin:auto}p{margin:20px 0}a img{border:none}img{margin:10px auto;max-width:100%;display:block}.left-justify{float:left}.right-justify{float:right}pre,code{font:12px Consolas,liberation mono,Menlo,Courier,monospace;background-color:#f7f7f7}code{font-size:12px;padding:4px}pre{margin-top:0;margin-bottom:16px;word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code::before,pre code::after{content:normal}em,q,em,dfn{font-style:italic}.sans,html .gist .gist-file .gist-meta{font-family:open sans,myriad pro,Myriad,sans-serif}.mono,pre,code,tt,p code,li code{font-family:Menlo,Monaco,andale mono,lucida console,courier new,monospace}.heading,.serif,h1,h2,h3{font-family:old standard tt,serif}strong{font-weight:600}q:before{content:"\201C"}q:after{content:"\201D"}del,s{text-decoration:line-through}blockquote{font-family:old standard tt,serif;text-align:center;padding:50px}blockquote p{display:inline-block;font-style:italic}blockquote:before,blockquote:after{font-family:old standard tt,serif;content:'\201C';font-size:35px;color:#403c3b}blockquote:after{content:'\201D'}hr{width:40%;height:1px;background:#403c3b;margin:25px auto}h1{font-size:35px}h2{font-size:28px}h3{font-size:22px;margin-top:18px}h1 a,h2 a,h3 a{text-decoration:none}h1,h2{margin-top:28px}#sub-header,.date{color:#403c3b;font-size:13px}#sub-header{margin:0 4px}#nav h1 a{font-size:35px;color:#1d1313;line-height:120%}.posts_listing a,#nav a{text-decoration:none}li{margin-left:20px}ul li{margin-left:5px}ul li{list-style-type:none}ul li:before{content:"\00BB \0020"}#nav ul li:before,.posts_listing li:before{content:'';margin-right:0}#content{text-align:left;width:100%;font-size:15px;padding:60px 0 80px}#content h1,#content h2{margin-bottom:5px}#content h2{font-size:25px}#content .entry-content{margin-top:15px}#content .date{margin-left:3px}#content h1{font-size:30px}.highlight{margin:10px 0}.posts_listing{margin:0 0 50px}.posts_listing li{margin:0 0 25px 15px}.posts_listing li a:hover,#nav a:hover{text-decoration:underline}#nav{text-align:center;position:static;margin-top:60px}#nav ul{display:table;margin:8px auto 0}#nav li{list-style-type:none;display:table-cell;font-size:15px;padding:0 20px}#links{display:flex;justify-content:space-between;margin:50px 0 0}#links :nth-child(1){margin-right:.5em}#links :nth-child(2){margin-left:.5em}#not-found{text-align:center}#not-found a{font-family:old standard tt,serif;font-size:200px;text-decoration:none;display:inline-block;padding-top:225px}@media(max-width:750px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:28px}#nav li{font-size:13px;padding:0 15px}#content{margin-top:0;padding-top:50px;font-size:14px}#content h1{font-size:25px}#content h2{font-size:22px}.posts_listing li div{font-size:12px}}@media(max-width:400px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:22px}#nav li{font-size:12px;padding:0 10px}#content{margin-top:0;padding-top:20px;font-size:12px}#content h1{font-size:20px}#content h2{font-size:18px}.posts_listing li div{font-size:12px}}@media(prefers-color-scheme:dark){*,#nav h1 a{color:#fdfdfd}body{background:#121212}pre,code{background-color:#262626}#sub-header,.date{color:#bababa}hr{background:#ebebeb}}</style></head><body><section id=nav><h1><a href=./index.html>JiveVlog</a></h1><ul><li><a href=./index.xml>Rss</a></li><li><a href=./sitemap.xml>Sitemap</a></li></ul></section><section id=content><h1>Correcting Apple's A9 SoC L3 Cache Size: A 4MB Victim Cache</h1><div id=sub-header>April 2024 · 5 minute read</div><div class=entry-content><p>Along with <a href=#>today’s analysis of Chipworks’ A9X die shot</a>, I’m also going to use this time to revisit Apple’s A9 SoC. Based on some new information from Chipworks and some additional internal test data, I am issuing a correction to our original analysis of Apple’s latest-generation phone SoC.</p><p><a href=#>In our original analysis of the A9</a>, I wrote that the L3 cache was 8MB. This was based upon our initial tests along with <a href=#>Chipworks’ own analysis of the physical layout of the A9</a>, which pointed to an 8MB L3 cache. Specifically, at the time I wrote:</p><p>However it’s also worth mentioning that as Apple is using an inclusive style cache here – where all cache data is replicated at the lower levels to allow for quick eviction at the upper levels – then Apple would have needed to increase the L3 cache size by 2MB in the first place just to offset the larger L2 cache. So the “effective” increase in the L3 cache size won’t be quite as great. Otherwise I’m a bit surprised that Apple has been able to pack in what amounts to 6MB more of SRAM on to A9 versus A8 despite the lack of a full manufacturing node’s increase in transistor density.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/9825/A9PNG_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><br>My Layout Analysis For A9 (<a href=#>Die Shot Courtesy Chipworks</a>)</p><p>As it turns out, 8MB of cache was too good to be true. After a few enlightening discussions with some other individuals, some further testing, and further discussions with Chipworks, both our performance analysis and their die analysis far more strongly point to a 4MB cache. In particular, Chipworks puts the physical size of the TSMC A9 variant’s L3 cache at ~4.5mm2, versus ~4.9mm2 for A8’s L3 cache. Ultimately TSMC’s 16nm FinFET process is built on top of their 20nm process – the metal pitch size as used by Apple is the same with both processes – and this is the limiting factor for the L3 cache SRAM density.</p><table align=center border=1 bordercolor=#dddddd cellpadding=3 cellspacing=0 width=650><tbody><tr class=tgrey><td align=center colspan=7>Apple SoC Comparison</td></tr><tr class=tlblue><td align=center bgcolor=#016a96 class=contentwhite width=146>&nbsp;</td><td align=center bgcolor=#016a96 class=contentwhite width=116>A9X</td><td align=center bgcolor=#016a96 class=contentwhite width=116>A9</td><td align=center bgcolor=#016a96 class=contentwhite width=115>A8</td><td align=center bgcolor=#016a96 class=contentwhite width=115>A7</td></tr><tr><td class=tlgrey><strong>CPU</strong></td><td align=center bgcolor=#f7f7f7>2x Twister</td><td align=center bgcolor=#f7f7f7>2x Twister</td><td align=center bgcolor=#f7f7f7>2x Typhoon</td><td align=center bgcolor=#f7f7f7>2x Cyclone</td></tr><tr><td class=tlgrey><strong>CPU Clockspeed</strong></td><td align=center bgcolor=#f7f7f7>2.26GHz</td><td align=center bgcolor=#f7f7f7>1.85GHz</td><td align=center bgcolor=#f7f7f7>1.4GHz</td><td align=center bgcolor=#f7f7f7>1.3GHz</td></tr><tr><td class=tlgrey><strong>GPU</strong></td><td align=center bgcolor=#f7f7f7>PVR 12 Cluster Series7</td><td align=center bgcolor=#f7f7f7>PVR GT7600</td><td align=center bgcolor=#f7f7f7>PVR GX6450</td><td align=center bgcolor=#f7f7f7>PVR G6430</td></tr><tr><td class=tlgrey><strong>RAM</strong></td><td align=center bgcolor=#f7f7f7>4GB LPDDR4</td><td align=center bgcolor=#f7f7f7>2GB LPDDR4</td><td align=center bgcolor=#f7f7f7>1GB LPDDR3</td><td align=center bgcolor=#f7f7f7>1GB LPDDR3</td></tr><tr><td class=tlgrey><strong>Memory Bus Width</strong></td><td align=center bgcolor=#f7f7f7>128-bit</td><td align=center bgcolor=#f7f7f7>64-bit</td><td align=center bgcolor=#f7f7f7>64-bit</td><td align=center bgcolor=#f7f7f7>64-bit</td></tr><tr><td class=tlgrey><strong>Memory Bandwidth</strong></td><td align=center bgcolor=#f7f7f7>51.2GB/sec</td><td align=center bgcolor=#f7f7f7>25.6GB/sec</td><td align=center bgcolor=#f7f7f7>12.8GB/sec</td><td align=center bgcolor=#f7f7f7>12.8GB/sec</td></tr><tr><td class=tlgrey><strong>L2 Cache</strong></td><td align=center bgcolor=#f7f7f7>3MB</td><td align=center bgcolor=#f7f7f7>3MB</td><td align=center bgcolor=#f7f7f7>1MB</td><td align=center bgcolor=#f7f7f7>1MB</td></tr><tr><td class=tlgrey><strong>L3 Cache</strong></td><td align=center bgcolor=#f7f7f7>None</td><td align=center bgcolor=#f7f7f7>4MB (Victim)</td><td align=center bgcolor=#f7f7f7>4MB (Inclusive)</td><td align=center bgcolor=#f7f7f7>4MB (Inclusive)</td></tr><tr><td class=tlgrey><strong>Manufacturing Process</strong></td><td align=center bgcolor=#f7f7f7>TSMC 16nm FinFET</td><td align=center bgcolor=#f7f7f7>TSMC 16nm &<br>Samsung 14nm</td><td align=center bgcolor=#f7f7f7>TSMC 20nm</td><td align=center bgcolor=#f7f7f7>Samsung 28nm</td></tr></tbody></table><p>But what is perhaps more interesting is what Apple is doing with their 4MB of L3 cache. An inclusive cache needs to be larger than the previous (inner) cache level, as it contains a copy of everything from the previous cache level. On A8 this was a 4:1 ratio, whereas with A9 this is a 4:3 ratio. One could technically still have an inclusive L3 cache with this setup, but the majority of its space would be occupied by the copy of the A9’s now 3MB L2 cache.</p><p>So what has Apple done instead? Inlight of Chipworks’ reassessment of the A9’s L3 cache size it’s clear that Apple has re-architected their L3 cache design instead.</p><p>What I believe we’re looking at here is that Apple has gone from an inclusive cache on A7 and A8 to a victim cache on A9. A <a href=#>victim cache</a>, in a nutshell, is a type of exclusive catch that is filled (and only filled) by cache lines evicted from the previous cache level. In A9’s case, this means that items evicted from the L2 caches are sent to the L3. This keeps recently used data and instructions that don’t fit in the L2 cache still on-chip, improving performance and saving power versus having to go to main memory, as recently used data is still likely to be needed again.</p><p>The shift from an inclusive cache to a victim cache allows the 4MB cache on A9 to still be useful, despite the fact that it’s now only slightly larger than the CPU’s L2 cache. Of course there are tradeoffs here – if you actually need something in the L3, it’s more work to manage moving data between L2 and L3 – but at the same time this allows Apple to retain many of the benefits of a cache without dedicating more space to an overall larger L3 cache.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/9825/A9Latency_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Meanwhile from the software side we can validate that it’s a victim cache by going back to our A9 latency graph. With the exclusive nature of the victim cache, the effective range of the L3 cache on A9 is the first 4MB after the end of the L2 cache; in other words, the L3 cache covers the 3MB to 7MB range in this test. Looking at our results, there’s a significant jump up in latency from 7MB to 8MB. Previously I had believed this to be due to the fact that our testing can’t control everything in the cache – the rest of the OS still needs to run – but in retrospect this fits the data much better, especially when coupled with Chipworks’ further analysis.</p><p>Ultimately the fact that Apple made such a significant cache change with A9 is more than I was expecting, but at the same time it’s worth keeping in mind that the L3 cache was only introduced back alongside Cyclone (A7) to begin with. So like several other aspects of Apple’s SoC design, A9 is very much an Intel-style “tock” on the microarchitecture side, with Apple having made significant changes to much more than just the CPU. Though coupled with what we now know about A9X, it does make me wonder whether Apple will keep around the L3 victim cache for A10 and beyond, or if it too will go the way of A9X’s L3 cache and be removed entirely in future generations.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7orrAp5utnZOde6S7zGiqoaenZIZ5fpRomqiqopqwtbXNoGSacaNiuXR5wpqaoZ0%3D</p></div><div id=links><a href=./december-21-birthday-zodiac-sign-sagittarius-astrology-courageous.html>&#171;&nbsp;December 21 Zodiac Horoscope Birthday Personality</a>
<a href=./steve-augeri-net-worth-income-salary-html.html>Steve Augeri Net Worth, Income, Salary, Earnings, Biography, How much money make?&nbsp;&#187;</a></div></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/banner.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>